<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">

	<head>
		<title>jSocket Example</title>
		<meta http-equiv="Content-type" content="text/html;charset=UTF-8" />
		<script src="../../../src/jquery-latest.min.js" type="text/javascript"></script>
		<script src="../common/js/common.js" type="text/javascript"></script>
		<script src="../../../src/swfobject.js" type="text/javascript"></script>
		<script src="../../../src/jsocket.js" type="text/javascript"></script>
		<script src="../../../src/jsocket.advanced.js" type="text/javascript"></script>
		<link rel="shortcut icon" href="#" />
		<link rel="stylesheet" href="../common/css/style.css" type="text/css" />
	</head>

	<body>
		<h1>jSocket example</h1>
		<div id="my_socket"></div>
		<div id="send" style="cursor:pointer;background-color: blue;color: white;border-radius: 5px;width: 64px;height: 30px;line-height: 30px;">
			发送数据
		</div>
		<!--<object width="400px" height="300px" id="my_socket" type="application/x-shockwave-flash" data="../../../flash/test.swf?jSocket_1" style="visibility: visible;"><param name="menu" value="false"></object>-->
		<script type="text/javascript">
			function ready() {
				console.log("socket ready");
				mySocket.connect("127.0.0.1", 4002);
				//mySocket.connect("192.168.1.8", 60000);
			}
			//连接是否成功
			function connect(success, data) {
				if(!success) {
					console.log("error:" + data)
					return;
				}
				console.log("socket connected");
				mySocket.write("GET / HTTP/1.1\r\n\r\n");
			}

			function data(content) {
				console.log("socket data");
				console.log(content)

			}

			function close() {
				console.log("socket close");

			}

			var mySocket = new jSocket(ready, connect, data, close);

			mySocket.setup("my_socket", "../../../flash/jsocket.advanced.swf");
			//mySocket.setup("my_socket","../../../flash/test.swf");
			document.getElementById("send").addEventListener("click",function(){
				mySocket.write("服务器hello");
			})
		</script>

		<!-- Google Analytics Code, do not include in own implementation!-->
		</script>
	</body>

</html>